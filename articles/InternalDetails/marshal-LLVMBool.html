<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Marshaling LLVMBool | Llvm.NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Marshaling LLVMBool | Llvm.NET ">
    <meta name="generator" content="docfx 2.29.1.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../DragonSharp48x48.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="marshaling-llvmbool">Marshaling LLVMBool</h1>

<p>LLVMBool is a typdef in the LLVM-C API that is both simple and problematic. In it&#39;s
simplest sense an LLVMBool is a representation of a bi-modal value. However, the
problematic part is that the semantics for the value are different depending on any
given API. That is, in some cases LLVMBool != 0 is a failure case, and others it is
a success! The confusion stems from LLVMBool serving a dual role:
  1) A real boolean true/false
  2) A status code where 0 == success and non-zero indicates an error</p>
<p>This duality is confusing and can lead to subtle errors in usage of APIs if translated
directly into language projections. This makes hands-off automatic generation of P/Invoke
calls to LLVM either imposible or error prone. Thus, Llvm.NET uses manually updated P/Invoke
calls that were initially auto generated to get things started but not maintined via any
generation tools. In the case of LLVMBool Llvm.NET uses distinct types for the different 
semantics and declares the interop signatures with the form appropriate to the function
being called. The two types are LLVMStatus and standard <code>System.Boolean</code> or <code>bool</code> in C#</p>
<h2 id="llvmstatus">LLVMStatus</h2>
<p>This is a status value where 0 == Success and non-zero is a failure or false status.
LLVMStatus is used whenever the 0 == success semantics apply to the API. For example:</p>
<pre><code class="lang-C#">[DllImport( LibraryPath, EntryPoint = &quot;LLVMWriteBitcodeToFD&quot;, CallingConvention = CallingConvention.Cdecl )]
internal static extern LLVMStatus LLVMWriteBitcodeToFD( LLVMModuleRef @M, int @FD, int @ShouldClose, int @Unbuffered );
</code></pre><h2 id="llvmbool">LLVMBool</h2>
<p>This is the traditioanl boolean value where 0==false and non-zero is true and uses the
standard boolean marshaling support for System.Boolean</p>
<pre><code class="lang-C#">[DllImport( LibraryPath, EntryPoint = &quot;LLVMTypeIsSized&quot;, CallingConvention = CallingConvention.Cdecl )]
[return: MarshalAs( UnmanagedType.Bool )]
internal static extern bool LLVMTypeIsSized( LLVMTypeRef @Ty );
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/UbiquityDotNET/Llvm.NET/blob/master/docfx/articles/InternalDetails/marshal-LLVMBool.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Copyright (C) 2017, Dot NET Foundation
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
