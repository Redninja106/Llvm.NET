<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Parse Tree Examples | Llvm.NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Parse Tree Examples | Llvm.NET ">
    <meta name="generator" content="docfx 2.29.1.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../DragonSharp48x48.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="parse-tree-examples">Parse Tree Examples</h1>

<h2 id="simple-expressions-chapters-34">Simple Expressions (Chapters 3,4)</h2>
<h3 id="basic-operators">Basic operators</h3>
<p><code>1 + 2 * 3 - 4 / 5 ^ 6;</code></p>
<p><img src="parsetree-simpleexp-1.svg" alt="Parse Tree"></p>
<div class="NOTE"><h5>Note</h5><p>The small circle in the upper left corner of the Expression nodes is the precedence value at
the entry to the rule. ANTLR uses a precendence climbing algorithm so this number indicates
the precedence for the expression in relation to others.</p>
</div>
<div class="NOTE"><h5>Note</h5><p>The parse tree for the expression has 5 children that are in evaluation order. That is,
evaluation of the expression starts at the left most child and proceeds across to the right
most child. Since, all binary operations include an operator symbol the evaluation would
consume the children (other than the first one) as an operator and right hand side pair.
this is used in the code generation when processing expression nodes.</p>
</div>
<h3 id="if-else-control-flow">If-Else control flow</h3>
<p>Given the following definition of a recursive function to compute
fibonacci numbers</p>
<pre><code class="lang-Kaleidoscope">def fib(x)
  if (x &lt; 3) then
    1
  else
    fib(x-1)+fib(x-2);
</code></pre><p>The parse tree looks like this:</p>
<p><img src="parsetree-if-else.svg" alt="Parse Tree"></p>
<h3 id="for-loop">For loop</h3>
<p>Given the following kaleidoscope function definition:</p>
<pre><code class="lang-Kaleidoscope">extern putchard(char);
def printstar(n)
  for i = 1, i &lt; n, 1.0 in
    putchard(42)  # ascii 42 = &#39;*&#39;
</code></pre><p>The parse tree looks like this:</p>
<p><img src="parsetree-for-loop.svg" alt="Parse Tree"></p>
<h3 id="user-defined-operators">User defined operators</h3>
<p>Given the following operator definitions:</p>
<pre><code class="lang-Kaleidoscope"># Logical unary not.
def unary!(v)
  if v then
    0
  else
    1;

# Define &gt; with the same precedence as &lt;.
def binary&gt; 10 (LHS RHS)
  RHS &lt; LHS;

# Binary &quot;logical or&quot;, (note that it does not &quot;short circuit&quot;)
def binary| 5 (LHS RHS)
  if LHS then
    1
  else if RHS then
    1
  else
    0;

# Define = with slightly lower precedence than relationals.
def binary== 9 (LHS RHS)
  !(LHS &lt; RHS | LHS &gt; RHS);
</code></pre><p>The epression <code>2 == 3 | 5 &lt; 4 | !1;</code> generates the following parse tree</p>
<p><img src="parsetree-userops.svg" alt="Parse Tree"></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/UbiquityDotNET/Llvm.NET/blob/master/docfx/articles/Samples/Kaleidoscope-Parsetree-examples.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Copyright (C) 2017, Dot NET Foundation
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
